function getData(e=""){let t=e||document.querySelector("input").value;window.localStorage.setItem("city",t),fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&appid=${apiKey}&units=metric`).then(e=>e.json()).then(e=>show(e)).catch(e=>console.error(e))}function show(e){if("city not found"!==e.message){country=e.sys.country,span=document.createElement("span"),span.appendChild(document.createTextNode(country)),span.classList="country",cityName.innerHTML=e.name,cityName.appendChild(span),temperature.innerHTML=Math.trunc(e.main.temp),desc.innerHTML=e.weather[0].description;let t=codeOf(e.weather[0].description);icon.setAttribute("src",`http://openweathermap.org/img/wn/${t}@2x.png`),card.style.opacity=1}}function codeOf(e){switch(e){case"clear sky":return"01n";case"few clouds":return"02n";case"scattered clouds":return"03n";case"broken clouds":return"04n";case"shower rain":return"09n";case"rain":return"10n";case"thunderstorm":return"11n";case"snow":return"13n";case"mist":return"50n"}}let cityName=document.querySelector(".city h3"),temperature=document.querySelector(".temp"),icon=document.querySelector(".condition img"),desc=document.querySelector(".condition p"),card=document.querySelector(".weather-card"),button=document.querySelector(".fa-arrow-right"),apiKey="afb963ddf7521fbd95deff5d9606415b";button.addEventListener("click",e=>getData()),document.querySelector("input").addEventListener("keypress",e=>{"Enter"===e.key&&button.click()});let storedCity=window.localStorage.getItem("city");null!==storedCity&&getData(storedCity);